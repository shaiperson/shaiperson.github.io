<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>ML Ops: A Fictional Case Study | Blog</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="ML Ops: A Fictional Case Study" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="MS in Computer Science, freelance engineer and entrepreneur" />
<meta property="og:description" content="MS in Computer Science, freelance engineer and entrepreneur" />
<link rel="canonical" href="/ml-ops-fictional-case-study" />
<meta property="og:url" content="/ml-ops-fictional-case-study" />
<meta property="og:site_name" content="Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-04T00:00:00-03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ML Ops: A Fictional Case Study" />
<script type="application/ld+json">
{"url":"/ml-ops-fictional-case-study","mainEntityOfPage":{"@type":"WebPage","@id":"/ml-ops-fictional-case-study"},"description":"MS in Computer Science, freelance engineer and entrepreneur","headline":"ML Ops: A Fictional Case Study","dateModified":"2021-12-04T00:00:00-03:00","datePublished":"2021-12-04T00:00:00-03:00","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Blog" /><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WCKF8CFPVZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WCKF8CFPVZ');
</script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">ML Ops: A Fictional Case Study</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-12-04T00:00:00-03:00" itemprop="datePublished">Dec 4, 2021
      </time></p>
  </header>

  <div class="post-like-button">
    <!-- LikeBtn.com BEGIN -->
    <span class="likebtn-wrapper" data-theme="youtube" data-i18n_like=" " data-identifier="item_1"></span>
    <script>(function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","//w.likebtn.com/js/w/widget.js");</script>
    <!-- LikeBtn.com END -->
    <br>
    <br>
  </div>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#the-case" id="markdown-toc-the-case">The case</a>    <ul>
      <li><a href="#the-product" id="markdown-toc-the-product">The product</a></li>
      <li><a href="#the-implementation" id="markdown-toc-the-implementation">The implementation</a></li>
      <li><a href="#the-problem" id="markdown-toc-the-problem">The problem</a></li>
      <li><a href="#an-initial-solution" id="markdown-toc-an-initial-solution">An initial solution</a></li>
      <li><a href="#what-about-the-next-time" id="markdown-toc-what-about-the-next-time">What about the next time?</a></li>
      <li><a href="#what-about-new-algorithms" id="markdown-toc-what-about-new-algorithms">What about new algorithms?</a></li>
    </ul>
  </li>
  <li><a href="#enter-ml-ops" id="markdown-toc-enter-ml-ops">Enter ML Ops</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>In this article, I’d like to walk you through how the incorporation of ML Ops practices might be of great assistance to an engineering team looking to apply ML to solve a problem.</p>

<h2 id="the-case">The case</h2>

<p>So, meet Riley, an engineer at <em>Nicr</em>. Nicr (as in “nicer”, but hipper) is a small startup developing a new model of interaction in social networks. Of course, I just made both Riley and nicr up completely. But bear with me; it will be worth it. Plus, you might just end up with an inspiring idea for a brand new social network after reading this article! That can’t be too bad now, can it?</p>

<p>OK, don’t quote me on that last part.</p>

<h3 id="the-product">The product</h3>

<p>We’ll keep it simple. Nicr has built an online social platform where users can:</p>

<ul>
  <li>Create posts</li>
  <li>Comment on posts</li>
  <li>Up-vote or down-vote posts and comments.</li>
</ul>

<p>But there’s a twist: as a user is about to submit their post or comment, the product team at Nicr wants them to recieve an automatically generated feedback scoring the “niceness” of their text in the form of a a numerical score from 0 to 10. The user will then be able to decide whether to post their content as is, modify it, delete it or ignore the niceness feedback altogether. The product team at Nicr has dubbed this the <em>nice-a-meter</em>.</p>

<p>They’re quite excited about it.</p>

<h3 id="the-implementation">The implementation</h3>

<p>Remember Riley? Tasked with implementing this spceial feature, Riley is quick to conclude her chances of success lie in the realm of Machine Learning. Being an experienced engineer and having always held an ear to the ground of tech, she knew well enough that <em>sentiment analysis</em> was a thing. Knowing how far ML has come and having played around with some of it on her own, she was also pretty sure she’d be able to easily find some tools and information to help her out. Indeed, a few queries to her favorite search engines yielded a slew of promising tutorials, articles and libraries.</p>

<p>Soon thereafter, having gone through <a href="https://huggingface.co/transformers/quicktour.html">Hugging Face’s great quick tour</a> and a visit or two to Stack Overflow, Riley has a working snippet of code that’s able to process an arbitrary string and return a sentiment score. To hook it up, she deploys a server application with this code and its dependencies to her IaaS of choice and exposes it through a simple HTTP API offering a <code class="language-plaintext highlighter-rouge">POST /sentiment-analysis</code> endpoint. Her client apps asynchronously send their requests to this server for each comment or post about to be submitted. Eventual issues of scale would be managed by creating a server image, scaling it horizontally and load balancing.</p>

<p>So far so good.</p>

<!--[note futuro challenge de Nicr podría ser deployar modelo a celu si por ejemplo empiezan a soportar feedback en vivo con cada palabra que se tipea -> considerar si Palanca ofrece edge deployment tipo OctoML].-->

<h3 id="the-problem">The problem</h3>

<p>Nicr’s social network grows, its teams grow and the platform gains a healthy base of loyal users. Problems arise, as they always do and always will; but they’re swiftly curbed by Nicr’s teams filled with fresh energy and motivation.</p>

<p>At a certain point, however, one particularly pernitious problem starts to make itself known. With conspicuously increasing frequency, user-submitted reports are coming in of unexpected nice-a-meter results on their content. Riley, now head of Nicr’s engineering team, takes a look at reported cases to get a sense of the issue. With an idea in mind of what could be going wrong, she and her team sit down to have it out with the nice-a-meter themselves. Things do seem a bit off, and soon enough they form a solid hypothesis of the root of the problem.</p>

<p>As Nicr’s platform grew and its community became tighter, so did the language employed by its users evolve. As this happened, new and idiosyncratic ways of conveying sentiment emerged and flourished. Riley’s initial Hugging Face out-of-the-box model, however, stayed back in time: it had never “seen” this language in its training, with new expressions coming up that could not have been reasonably associated with their new-found meaning and new words previously unused in human interaction. In other words, Riley’s ML model had caught a strong case of <em>model drift</em>: it had stagnated, its current training clearly outdated with respect to the evolving nature of the data it’s employed to process.</p>

<h3 id="an-initial-solution">An initial solution</h3>

<p>Broad strokes: if a model is outdated, then an update is in order. A few questions therefore immediately come to mind</p>

<ul>
  <li>
    <p><em>How might we train our model on our own data?</em></p>
  </li>
  <li>
    <p><em>How might we validate the new model is better than the old one?</em></p>
  </li>
</ul>

<p>Having been in charge of shipping the nice-a-meter initially, Riley takes on this task. Digging back into search engines Hugging Face’s Transformers docs, she learns that their model can be fine-tuned with custom datasets, and that once such a dataset is ready it could also be used to validate the new model’s performance by running it on train/test splits or cross validation. In need of a dataset <!--[note dataset feature]-->, Riley mines the logs for samples that include interesting cases of mis-classification <!--[note "no siempre va a ser tan fácil" e.g mucha data o imágenes]--> to be manually supervised, <!--[note ordering by prob]--> and tagging work is divided among the team <!--[note "no siempre se va a poder hacer", dividir la data entre muchos tampoco es fácil, le quita mucho tiempo a todos]-->.</p>

<p>As for the fine-tuning code, it becomes clear to Riley that this will not be as breezy as setting up the out-of-the-box model was; a decent amount more of research and trial-and-error is required. But, before long, her fine-tuning code is ready to go. With the dataset all cooked up, a new model is trained and to encouraging results: running some metrics on the test split using the old model and the new one shows a significant improvement, validating the team’s suspicions and their efforts towards a fix. The new model is deployed in much the same way that the first one was, with Riley manually uploading it to a server’s disk, creating a new image and rolling it out using her cloud computing service’s general-purpose deployment functionalities.</p>

<h3 id="what-about-the-next-time">What about the next time?</h3>

<p>Nevertheless, a third and important question had also come to Riley’s mind when she understood what had happened:</p>

<ul>
  <li><em>What about the next time?</em></li>
</ul>

<p>Just as the nature of data in the wild had changed enough at that point to cause drift, so it is bound to do again. Would they just wait for user reports to pour in again and repeat the exact same process? They’d have to manually prepare a dataset, spend time dividing and managing supervision work, manually re-train and manually re-deploy. Monitoring will be left again to an indirect means such as mining subsequent user-submitted reports. Whenever this problem arises again, they’d have to scramble to figure out what’s causing the new drift before even having a chance at working on fixing it. Needless to say, all the while they’d be allowing a degradation of service to take place that they might not be able to afford, and crucial work hours would be allocated away from other important bugs and features.</p>

<p>And right as Riley is sitting at her desk pondering these worrying questions, a Slack message from the product team makes its way to her screen: <em>Hey Riley! Listen, looks like spam is starting to become a problem. I’ve heard you can use Machine Learning for that?</em></p>

<h3 id="what-about-new-algorithms">What about new algorithms?</h3>

<p>So yes, Machine Learning is probably the best solution for spam classification. Any data scientist’s introductory “hello world” classifier, it’s also pretty much a solved problem. However, spam may be idiosyncratic to a platform as well, and if Nicr’s exeprience with sentiment analysis is any indication, it will become so more and more with time. To make things worse, it now appears that spammers have been using images to post their spam on Nicr, with obfuscated text in images and watermarked logos of sketchy online businesses. So, much of what they had done for their sentiment analysis problem would not be of use, having new challenges in setting up ways to tag images and handle image datasets, manage performance and hardware issues related to running ML on images and more. Should they invest time and resources in creating and standardizing processes to monitor, re-train and deploy models?</p>

<p>It couldn’t be any clearer to Riley that a better solution is needed.</p>

<h2 id="enter-ml-ops">Enter ML Ops</h2>

<p>Let’s take a step back and have a look at the bigger picture. Riley and Nicr’s fictional case makes the following point: things get really messy as the use of Machine Learning is extended in application and in time within an organization. Scaling ML models, keeping training data up-to-date and ensuring models are in tip-top shape is hard, and becomes harder as the number of models increase and the kinds of problems they’re applied to diversifies.</p>

<p>That’s where ML Ops, or Machine Learning Operations, come in. Think about it this way: nowadays, you wouldn’t dream of scaling a software development effort without practicing proper DevOps. Just as with DevOps for development, a means of standardizing processes and incorporating reliable and flexible automation is the key to success in scaling with Machine Learning.</p>

<!--[## _Palanca_ and the Next Chapter]-->

<!--[With this observation in mind, the idea for [_Palanca_](https://www.gopalanca.com/) was born. At Palanca, we're committed to providing ML Ops solutions for business looking to do exactly that. As well as offering tailored solutions for clients, we're also hard at work in crafting a powerful, single-dashboard tool that strives to concentrate everything a team might need to step up their ML Ops immediately by integrating it into their workflow.]-->

<!--[Bringing our prior experience in the field to the table and levaraging the latest tools and infrastructure technology, whether by custom-made solutions or through a powerful dashboard, we're eager to help businesses maximize their ML potential by facing the kinds of challenges exemplified here, and more, successfully.]-->

<!--[So, as is probably clear by now, we're pretty confident we'd have been of great help to Riley and the Nicr team. Given the issues they encountered in their application of ML to their product, they would have benefited greatly from bringing ML Ops practices into their development process.]-->

<!--[In a following article, we'll take a good look at how this might happen. We'll present ML Ops practices and some of the most exciting features of our work-in-progress tool by examining in detail how Riley and her team might have levaraged them to great advantage.]-->

<!--[Entonces, "let's step back". Riley necesita abstracciones, procesos, automatización etc -> Palanca ofrece eso -> Veamos como Riley podría aprovechar nuestros productos -> Riley entra acá, toca acá, sube allá, monitorea acullá. [note screenshots]]-->
<!--[Ahora que cuentan con eso, en Nicr de repente pueden empezar a aplicar ML para resolver cosas mucho más interesantes y complejas (e.g predicción de up-votes/down-votes en función del sentimiento del contenido, predicción de churn en base a up-votes/down-votes o sentimiento de comentarios en sus posts. Noter que estos algoritmos tendrían inputs "compuetsos" and not just texto o imagen y nosotros ofreceríamos funcionalidad para eso).]-->
<!--[Encontrar la manera de mencionar otros features que se desprenden de tener algo así como el poder trackear historial de modelos (para e.g eventualmente decidirse por cambio de arquitectura de red), versionado y rollbacks, sandboxing para experimentar etc, cálculo de métricas subseleccionando features de la data.]-->
<!--[Sugerir al final somehow que el producto no está terminado y veríamos qué necesidades tiene cada cliente?]-->
<!--[Que quede claro que el punto es que las necesidades específicas o idiosincráticas no tardan en aparecer ni tampoco lo hace la multiplicidad de modelos.]-->
<!--[btw, in case you were wondering, Riley is now CTO porque la promocionaron por tomar buenas decision como contratarnos :P]-->


  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = '/ml-ops-fictional-case-study';
      this.page.identifier = '/ml-ops-fictional-case-study';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://blog-5wau4acajq.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/ml-ops-fictional-case-study" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

<!--    <h2 class="footer-heading">Blog</h2>-->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Blog</li><li><a class="u-email" href="mailto:bianchishai@gmail.com">bianchishai@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/shaiperson"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">shaiperson</span></a></li><li><a href="https://www.linkedin.com/in/shaibianchi"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">shaibianchi</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>MS in Computer Science, freelance engineer and entrepreneur</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
